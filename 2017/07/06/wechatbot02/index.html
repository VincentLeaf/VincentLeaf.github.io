<!DOCTYPE html>
<html lang="zh">
    <head>

    
    <title>
        
            接入图灵接口来制作微信机器人 | 
        
        追了么
    </title>

    <!-- Meta & Info -->
    <meta charset="utf-8">

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">
    
    
    
        <link rel="dns-prefetch" href="https://changyan.sohu.com"/>
    
    
        <link rel="dns-prefetch" href="https://hm.baidu.com"/>
    
    
    

    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="Vincent Li">
    <meta name="description" content="It&#39;s VL&#39;s Blog.">
    <meta name="keywords" content="追了么,wechat">

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/avator.jpg">
    <link rel="icon" sizes="192x192" href="/img/weblogo.png">
    <link rel="apple-touch-icon" href="/img/weblogo.png">

    <!--iOS -->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="white">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="white">
    <meta name="apple-mobile-web-app-title" content="追了么">

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://zhuile.me">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="接入图灵接口来制作微信机器人 | 追了么">
    <meta property="og:description" content="It&#39;s VL&#39;s Blog.">
    <meta property="og:article:tag" content="wechat"> 

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import CSS & jQuery -->
    
        <link rel="stylesheet" href="/css/material.min.css">
        <link rel="stylesheet" href="/css/style.min.css">
        <!-- Config CSS -->


<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


        <script src="/js/jquery.min.js"></script>
        <script src="/js/queue.js"></script>
    

    <!-- UC Browser Compatible -->
    <script>
        var agent = navigator.userAgent.toLowerCase();
        if(agent.indexOf('ucbrowser')>0) {
            document.write("<link rel=\"stylesheet\" href=\"/css/uc.css\">");
            alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
        }
    </script>

    
    <!-- Baidu Analytics -->
    <script>
        var _hmt = _hmt || [];
        (function() {var hm = document.createElement('script');
        hm.src = 'https://hm.baidu.com/hm.js?f555715f1b0284ac7882a55e74c1a81a';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(hm, s);
        })();
    </script>
    

    


    <!-- Bing Background -->
    
    
    <!-- fixed ios web app link problem-->
	<script type="text/javascript">
		if(("standalone" in window.navigator) && window.navigator.standalone){
			var noddy, remotes = false;
			document.addEventListener('click', function(event) {
				noddy = event.target;
				while(noddy.nodeName !== "A" && noddy.nodeName !== "HTML") {
					noddy = noddy.parentNode;
				}
				if('href' in noddy && noddy.href.indexOf('http') !== -1 && (noddy.href.indexOf(document.location.host) !== -1 || remotes))
				{
					event.preventDefault();
					document.location.href = noddy.href;
				}
			},false);
		}
</script>
  
  <!-- Baidu Auto Push Script-->
   <script>
	   (function(){
		   var bp = document.createElement('script');
		   var curProtocol = window.location.protocol.split(':')[0];
		   if (curProtocol === 'https') {
			   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
		   }
		   else {
			   bp.src = 'http://push.zhanzhang.baidu.com/push.js';
		   }
		   var s = document.getElementsByTagName("script")[0];
		   s.parentNode.insertBefore(bp, s);
	   })();
</script>
   
    <!-- Custom Head -->
    
<link rel="stylesheet" href="/css/prism.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->

    <!-- Left aligned menu below button -->
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#前言"><span class="post-toc-number">1.</span> <span class="post-toc-text">前言</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#图灵机器人介绍"><span class="post-toc-number">2.</span> <span class="post-toc-text">图灵机器人介绍</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Request"><span class="post-toc-number">3.</span> <span class="post-toc-text">Request</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#将整个Request-amp-Post操作打包"><span class="post-toc-number">4.</span> <span class="post-toc-text">将整个Request & Post操作打包</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#userid"><span class="post-toc-number">5.</span> <span class="post-toc-text">userid</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#回复用户"><span class="post-toc-number">6.</span> <span class="post-toc-text">回复用户</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#转账功能"><span class="post-toc-number">7.</span> <span class="post-toc-text">转账功能</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#总结"><span class="post-toc-number">8.</span> <span class="post-toc-text">总结</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#完整代码"><span class="post-toc-number">9.</span> <span class="post-toc-text">完整代码</span></a></li></ol>

        <!--
        <li class="mdl-menu__item">
            Some Action
        </li>
        -->
    </ul>




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        <!-- Custom Thumbnail -->
        <div class="post_thumbnail-custom mdl-card__media mdl-color-text--grey-50" style="background-image:url(http://oqi5hmt36.bkt.clouddn.com/17-12-27/3788808.jpg)">
    
            <p class="article-headline-p">
                接入图灵接口来制作微信机器人
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/touxiang.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>Vincent Li</strong>
        <span>7月 06, 2017</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/wechat/">wechat</a>
    </ul>
    

    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=接入图灵接口来制作微信机器人&url=http://zhuile.me//2017/07/06/wechatbot02/index.html&pic=&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=接入图灵接口来制作微信机器人&url=http://zhuile.me//2017/07/06/wechatbot02/index.html&via=Vincent Li" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=http://zhuile.me//2017/07/06/wechatbot02/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=http://zhuile.me//2017/07/06/wechatbot02/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=追了么&title=接入图灵接口来制作微信机器人&summary=It&#39;s VL&#39;s Blog.&pics=http://zhuile.me/img/avator.jpg&url=http://zhuile.me/2017/07/06/wechatbot02/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
</ul>

</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>上次我们一起了解了有关itchat常用的API接口，这次我将介绍如何将图灵机器人接入itchat，制作一个能够智能判断，回复消息的微信机器人。<br><img src="http://oqi5hmt36.bkt.clouddn.com/17-12-27/3788808.jpg" alt=""></p>
<h2 id="图灵机器人介绍"><a href="#图灵机器人介绍" class="headerlink" title="图灵机器人介绍"></a>图灵机器人介绍</h2><p><a href="http://www.tuling123.com" target="_blank" rel="external">图灵机器人</a>是一个能够根据用户输入来自动判断场景来回复用户的开发平台，也是目前我所了解中在中文语境下运行的最好的平台（我没并没有收到来自他们的广告费）。在平台注册后我们可以拿到自己的API Key，并用Request的方式来获取答复。<br><img src="http://oqi5hmt36.bkt.clouddn.com/17-12-27/2640973.jpg" alt=""></p>
<h2 id="Request"><a href="#Request" class="headerlink" title="Request"></a>Request</h2><p>图灵Request的json至少包含以下三个值，分别是key (API key)， info (用户输入的消息)，userid (用户唯一的ID，用来在不同用户下判断不同的语境)。</p>
<h2 id="将整个Request-amp-Post操作打包"><a href="#将整个Request-amp-Post操作打包" class="headerlink" title="将整个Request &amp; Post操作打包"></a>将整个Request &amp; Post操作打包</h2><p>为了后续的使用，我们将整个request的流程打包成一个方法。这里运用到了Python的request库和json库。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">getReply</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> uid<span class="token punctuation">)</span><span class="token punctuation">:</span>
    url <span class="token operator">=</span> <span class="token string">'http://www.tuling123.com/openapi/api'</span>
    <span class="token triple-quoted-string string">'''API Address'''</span>

    data <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'key'</span> <span class="token punctuation">:</span> <span class="token string">'b1bd5226a8e641b89b4de72c2757ce33'</span><span class="token punctuation">,</span>
        <span class="token string">'info'</span> <span class="token punctuation">:</span> input<span class="token punctuation">,</span>
        <span class="token string">'userid'</span> <span class="token punctuation">:</span> uid
    <span class="token punctuation">}</span>
    <span class="token triple-quoted-string string">'''the three value that Tuling required'''</span>

    jsonData <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token triple-quoted-string string">'''create json data'''</span>

    <span class="token keyword">print</span> <span class="token punctuation">(</span>jsonData<span class="token punctuation">)</span>
    <span class="token triple-quoted-string string">'''for future debug use'''</span>

    reply <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token punctuation">,</span> jsonData<span class="token punctuation">)</span>
    <span class="token triple-quoted-string string">'''post it, and get the generated reply from tuling'''</span>

    <span class="token keyword">return</span> reply<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token triple-quoted-string string">'''return the reply content'''</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>通过post得到一个json的值，这个json根据语境的不同会有两个或三个参数。分别是code (回复消息的类型)，text（回复消息的内容），url（如果回复消息中含有链接，会在这个里面显示）。</p>
<h2 id="userid"><a href="#userid" class="headerlink" title="userid"></a>userid</h2><p>前面提到request的json中有一个必须的参数，userid。这个参数是用来判断不同用户的语境的。比如说一个用户提问“天气怎么样”，此时根据这个userid，机器人会进一步询问“你所在的城市在哪里”，因为记录了userid，此时机器人就有能力联系上下文来进一步回复用户了。</p>
<p>那么这个userid从哪里来呢？最简单的办法就是直接使用用户的微信ID。这个微信ID不同于我们平时所常说的微信号，微信ID是每个用户唯一的，由数字字母组成。查看图灵的文档后发现，微信ID远远长出图灵所接受userid的位数，所以在这里要做一个截取的操作。</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">generateUID</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> input<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">30</span><span class="token punctuation">]</span>
    <span class="token triple-quoted-string string">'''extract wechat ID'''</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h2 id="回复用户"><a href="#回复用户" class="headerlink" title="回复用户"></a>回复用户</h2><p>在完成上面的部分后，我们当然要把我们获取到的回复信息返回给用户。以下讲讲完整的程序逻辑。</p>
<p>首先是收到来自用户发出的信息，判断为文字信息后进入回复的方法。然后生成图灵要用的userid，用前面写的getReply方法来获取回复。根据code来判断产生的回复中有没有含有链接，如果的有话也要发送给用户。</p>
<p>代码如下：</p>
<pre class="line-numbers language-python"><code class="language-python">@itchat<span class="token punctuation">.</span>msg_register<span class="token punctuation">(</span>TEXT<span class="token punctuation">,</span> isFriendChat<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span> 
<span class="token triple-quoted-string string">'''only reply text message'''</span>
<span class="token keyword">def</span> <span class="token function">simpleReply</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">:</span>
    reply <span class="token operator">=</span> getReply<span class="token punctuation">(</span>msg<span class="token punctuation">[</span><span class="token string">'Content'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> generateUID<span class="token punctuation">(</span>msg<span class="token punctuation">[</span><span class="token string">'FromUserName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token triple-quoted-string string">'''get reply'''</span>
    replyText <span class="token operator">=</span> reply<span class="token punctuation">[</span><span class="token string">'text'</span><span class="token punctuation">]</span> <span class="token triple-quoted-string string">'''reply content'''</span>
    replyCode <span class="token operator">=</span> <span class="token string">'%s'</span> <span class="token operator">%</span> reply<span class="token punctuation">[</span><span class="token string">'code'</span><span class="token punctuation">]</span> <span class="token triple-quoted-string string">'''reply code'''</span>
    itchat<span class="token punctuation">.</span>send<span class="token punctuation">(</span>replyText<span class="token punctuation">,</span> msg<span class="token punctuation">[</span><span class="token string">'FromUserName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> 
    <span class="token triple-quoted-string string">'''send back text message'''</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>replyCode <span class="token operator">==</span> <span class="token string">'200000'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        itchat<span class="token punctuation">.</span>send<span class="token punctuation">(</span>reply<span class="token punctuation">[</span><span class="token string">'url'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> msg<span class="token punctuation">[</span><span class="token string">'FromUserName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">elif</span><span class="token punctuation">(</span>replyCode <span class="token operator">==</span> <span class="token string">'302000'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> obj <span class="token keyword">in</span> reply<span class="token punctuation">[</span><span class="token string">'list'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            itchat<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">'标题：%s'</span> <span class="token operator">%</span> obj<span class="token punctuation">[</span><span class="token string">'article'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> msg<span class="token punctuation">[</span><span class="token string">'FromUserName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            itchat<span class="token punctuation">.</span>send<span class="token punctuation">(</span>obj<span class="token punctuation">[</span><span class="token string">'detailurl'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> msg<span class="token punctuation">[</span><span class="token string">'FromUserName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token triple-quoted-string string">'''
    send other contents to users if reply have any url
    '''</span>

    <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">'Received message from %s'</span> <span class="token operator">%</span> msg<span class="token punctuation">[</span><span class="token string">'FromUserName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">'%s'</span> <span class="token operator">%</span> msg<span class="token punctuation">[</span><span class="token string">'Content'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">'my reply: '</span> <span class="token operator">+</span> replyText<span class="token punctuation">)</span>
    <span class="token triple-quoted-string string">'''
    for future debug use
    '''</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="转账功能"><a href="#转账功能" class="headerlink" title="转账功能"></a>转账功能</h2><p>判断消息为note类型后我们可以用这个功能来判断转账的数额是否为用户所要求的，如果不是，就可以及时发出提醒。代码如下</p>
<pre class="line-numbers language-python"><code class="language-python">@itchat<span class="token punctuation">.</span>msg_register<span class="token punctuation">(</span><span class="token string">'Note'</span><span class="token punctuation">)</span>
<span class="token triple-quoted-string string">'''只处理转账类型的消息'''</span>
<span class="token keyword">def</span> <span class="token function">get_note</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> any<span class="token punctuation">(</span>s <span class="token keyword">in</span> msg<span class="token punctuation">[</span><span class="token string">'Text'</span><span class="token punctuation">]</span> <span class="token keyword">for</span> s <span class="token keyword">in</span> <span class="token punctuation">(</span>u<span class="token string">'红包'</span><span class="token punctuation">,</span> u<span class="token string">'转账'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        money <span class="token operator">=</span> msg<span class="token punctuation">[</span><span class="token string">'Text'</span><span class="token punctuation">]</span>
        amount <span class="token operator">=</span> filter<span class="token punctuation">(</span>str<span class="token punctuation">.</span>isdigit<span class="token punctuation">,</span> money<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'gbk'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token triple-quoted-string string">'''获取用户转账的数额'''</span>
        target <span class="token operator">=</span> <span class="token string">'100'</span>
        <span class="token triple-quoted-string string">'''目标数额'''</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>money<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span>
        <span class="token triple-quoted-string string">'''debug info'''</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>amount <span class="token operator">==</span> target<span class="token punctuation">)</span><span class="token punctuation">:</span>
            itchat<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">'success!'</span><span class="token punctuation">,</span> msg<span class="token punctuation">[</span><span class="token string">'FromUserName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">elif</span><span class="token punctuation">(</span>amount <span class="token operator">!=</span> target<span class="token punctuation">)</span><span class="token punctuation">:</span>
            itchat<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">'failed, wrong amount'</span><span class="token punctuation">,</span> msg<span class="token punctuation">[</span><span class="token string">'FromUserName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Other note: %s'</span><span class="token operator">%</span>msg<span class="token punctuation">[</span><span class="token string">'Text'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token triple-quoted-string string">'''notify user is the amount of money correct or not'''</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>通过使用python的request, itchat以及图灵机器人平台，我们很简单的完成里一个能够智能回复消息,接受指定交易的微信机器人。如果加入更多的逻辑判断，如检测内容中的时间词语等，这个微信机器人甚至可以帮我们来记录日程，创建备忘录等等。</p>
<h2 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h2><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># -*- coding: utf-8 -*-</span>
<span class="token keyword">import</span> itchat
<span class="token keyword">from</span> itchat<span class="token punctuation">.</span>content <span class="token keyword">import</span> <span class="token operator">*</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> json

<span class="token keyword">def</span> <span class="token function">generateUID</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> input<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">30</span><span class="token punctuation">]</span>

<span class="token keyword">def</span> <span class="token function">getReply</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> uid<span class="token punctuation">)</span><span class="token punctuation">:</span>
    url <span class="token operator">=</span> <span class="token string">'http://www.tuling123.com/openapi/api'</span>
    data <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'key'</span> <span class="token punctuation">:</span> <span class="token string">'b1bd5226a8e641b89b4de72c2757ce33'</span><span class="token punctuation">,</span>
        <span class="token string">'info'</span> <span class="token punctuation">:</span> input<span class="token punctuation">,</span>
        <span class="token string">'userid'</span> <span class="token punctuation">:</span> uid
    <span class="token punctuation">}</span>
    jsonData <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token keyword">print</span> <span class="token punctuation">(</span>jsonData<span class="token punctuation">)</span>
    reply <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token punctuation">,</span> jsonData<span class="token punctuation">)</span>
    <span class="token keyword">return</span> reply<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>

@itchat<span class="token punctuation">.</span>msg_register<span class="token punctuation">(</span>TEXT<span class="token punctuation">,</span> isFriendChat<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">simpleReply</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">:</span>
    reply <span class="token operator">=</span> getReply<span class="token punctuation">(</span>msg<span class="token punctuation">[</span><span class="token string">'Content'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> generateUID<span class="token punctuation">(</span>msg<span class="token punctuation">[</span><span class="token string">'FromUserName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    replyText <span class="token operator">=</span> reply<span class="token punctuation">[</span><span class="token string">'text'</span><span class="token punctuation">]</span>
    replyCode <span class="token operator">=</span> <span class="token string">'%s'</span> <span class="token operator">%</span> reply<span class="token punctuation">[</span><span class="token string">'code'</span><span class="token punctuation">]</span>
    itchat<span class="token punctuation">.</span>send<span class="token punctuation">(</span>replyText<span class="token punctuation">,</span> msg<span class="token punctuation">[</span><span class="token string">'FromUserName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>replyCode <span class="token operator">==</span> <span class="token string">'200000'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        itchat<span class="token punctuation">.</span>send<span class="token punctuation">(</span>reply<span class="token punctuation">[</span><span class="token string">'url'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> msg<span class="token punctuation">[</span><span class="token string">'FromUserName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">elif</span><span class="token punctuation">(</span>replyCode <span class="token operator">==</span> <span class="token string">'302000'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> obj <span class="token keyword">in</span> reply<span class="token punctuation">[</span><span class="token string">'list'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            itchat<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">'标题：%s'</span> <span class="token operator">%</span> obj<span class="token punctuation">[</span><span class="token string">'article'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> msg<span class="token punctuation">[</span><span class="token string">'FromUserName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            itchat<span class="token punctuation">.</span>send<span class="token punctuation">(</span>obj<span class="token punctuation">[</span><span class="token string">'detailurl'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> msg<span class="token punctuation">[</span><span class="token string">'FromUserName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">'Received message from %s'</span> <span class="token operator">%</span> msg<span class="token punctuation">[</span><span class="token string">'FromUserName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">'%s'</span> <span class="token operator">%</span> msg<span class="token punctuation">[</span><span class="token string">'Content'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">'my reply: '</span> <span class="token operator">+</span> replyText<span class="token punctuation">)</span>

@itchat<span class="token punctuation">.</span>msg_register<span class="token punctuation">(</span><span class="token string">'Note'</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">get_note</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> any<span class="token punctuation">(</span>s <span class="token keyword">in</span> msg<span class="token punctuation">[</span><span class="token string">'Text'</span><span class="token punctuation">]</span> <span class="token keyword">for</span> s <span class="token keyword">in</span> <span class="token punctuation">(</span>u<span class="token string">'红包'</span><span class="token punctuation">,</span> u<span class="token string">'转账'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        money <span class="token operator">=</span> msg<span class="token punctuation">[</span><span class="token string">'Text'</span><span class="token punctuation">]</span>
        amount <span class="token operator">=</span> filter<span class="token punctuation">(</span>str<span class="token punctuation">.</span>isdigit<span class="token punctuation">,</span> money<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'gbk'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        target <span class="token operator">=</span> <span class="token string">'100'</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>money<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>amount <span class="token operator">==</span> target<span class="token punctuation">)</span><span class="token punctuation">:</span>
            itchat<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">'success!'</span><span class="token punctuation">,</span> msg<span class="token punctuation">[</span><span class="token string">'FromUserName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">elif</span><span class="token punctuation">(</span>amount <span class="token operator">!=</span> target<span class="token punctuation">)</span><span class="token punctuation">:</span>
            itchat<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">'failed, wrong amount'</span><span class="token punctuation">,</span> msg<span class="token punctuation">[</span><span class="token string">'FromUserName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Other note: %s'</span><span class="token operator">%</span>msg<span class="token punctuation">[</span><span class="token string">'Text'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

itchat<span class="token punctuation">.</span>auto_login<span class="token punctuation">(</span>enableCmdQR<span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span>
itchat<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>作者：Vincent Li</p>
<p>更多内容请访问<a href="http://www.zhuile.me/" target="_blank" rel="external">追了么</a></p>
</blockquote>

    

    
</div>


                

                <!-- Post Comments -->
                
                    


    <!-- 使用 changyan -->
    <div id="changyan-comment">
        <!--PC和WAP自适应版-->
<div id="SOHUCS" sid="2017/07/06/wechatbot02/"  ></div>
<script type="text/javascript">
(function(){
var appid = 'cyt1LdMpx';
var conf = 'prod_fe671ea26c000bdf4ae732dd1ce56b09';
var width = window.innerWidth || document.documentElement.clientWidth;
if (width < 960) {
window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); } else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); } })(); </script>

    </div>
    <style>
        #changyan-comment{
            background-color: #eee;
            padding: 2pc;
        }
    </style>






                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2017/06/06/wechatbot01/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/touxiang.png" alt="Vincent Li's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        vincentleaf@foxmail.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="#" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/" target="_self">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    时间线
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2017/07/">七月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/06/">六月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/05/">五月 2017<span class="sidebar_archives-count">2</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/工具/">工具<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/聊天机器人/">聊天机器人<span class="sidebar_archives-count">2</span></a>
            </ul>
        </li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/tags/" title="标签云">
                
                    <i class="material-icons sidebar-material-icons">cloud</i>
                
                标签云
            </a>
        </li>
        
    
        <li>
            <a href="/gallery/" title="图库">
                
                    <i class="material-icons sidebar-material-icons">collections</i>
                
                图库
            </a>
        </li>
        
            <li class="divider"></li>
        
    
        <li>
            <a href="/links/" title="友情链接">
                
                    <i class="material-icons sidebar-material-icons">swap_horiz</i>
                
                友情链接
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->


<!-- Theme Material -->


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/facebook" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-facebook.svg);">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    

    <!-- Weibo -->
    
        <a href="http://weibo.com/tanyealwaysloveyou" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-weibo.svg);">
                <span class="visuallyhidden">Weibo</span>
            </button><!--
     --></a>
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/VincentLeaf" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-github.svg);">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    
        <a href="https://www.zhihu.com/people/vincent-99-6" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-zhihu.svg);">
                <span class="visuallyhidden">Zhihu</span>
            </button><!--
     --></a>
    

    <!-- Bilibili -->
    
        <a href="http://space.bilibili.com/9297678/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-bilibili.svg);">
                <span class="visuallyhidden">Bilibili</span>
            </button><!--
     --></a>
    

    <!-- Telegram -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;
            <script type="text/javascript">
                var fd = new Date();
                document.write(fd.getFullYear());
            </script>
            &nbsp;追了么
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                
            </div>
        </div>
    
</footer>


                    <!-- Import File -->

    <script src="/js/lazyload.min.js"></script>
    <script src="/js/js.min.js"></script>



    <script src="/js/nprogress.js"></script>


<script type="text/javascript">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>










    <!-- 畅言公共 js 代码 start -->
		<script id="cy_cmt_num" src="https://changyan.sohu.com/upload/plugins/plugins.list.count.js?clientId=cyt1LdMpx">
</script>
    <!-- 畅言公共 js 代码 end -->







<!-- Window Load-->
<script>
    $(window).load(function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });
</script>

<!-- MathJax Load-->

<script>
    <!-- Offer LazyLoad -->
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    <!-- Start Queue -->
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

                </main>
            </div>
        </body>
    
</html>
